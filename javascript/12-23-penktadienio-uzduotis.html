<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <title>Prekiu krepselis</title>
  </head>
  <body>
    <div class="container">
      <div class="d-flex justify-content-center mt-3 p-4">
        <h1>PREKIU KREPSELIS</h1>
      </div>
      <div class="d-flex justify-content-center mt-3">
        <p style="color: red; font-size: 15px" id="message">
          Jusu krepselis tuscias
        </p>
      </div>
      <form
        onsubmit="addResult(event)"
        class="d-flex justify-content-between mb-3"
      >
        <input
          class="w-100 me-2 form-control"
          type="text"
          name=""
          id=""
          placeholder="Iveskite preke"
        />
        <input
          class="w-50 me-2 form-control"
          type="number"
          name=""
          id=""
          placeholder="Iveskite kieki"
        />
        <button class="btn btn-danger">Prideti</button>
      </form>
      <table class="table table-bordered">
        <thead class="table-secondary">
          <tr class="">
            <th class="col-5 text-center">Preke</th>
            <th class="col-2 text-center">Kiekis</th>
            <th class="col-2 text-center">Istrinti</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <script>
      const shoppingCart = [];
      let result = "";

      function addResult(event) {
        event.preventDefault();

        let cart = [];

        item = document.querySelector('[type="text"]').value;
        qty = document.querySelector('[type="number"]').value;

        if (item !== "" && qty > 0) {
          cart.push(item, qty);
          shoppingCart.push(cart);

          result += `
                          <tr class="items">
                              <td class="align-middle">${item}</td>
                              <td class="text-center align-middle">${qty}</td>
                              <td><button class="btn remove btn-secondary">Istrinti</button></td>
                          </tr>`;

          document.querySelector("tbody").innerHTML = result;
        }
        if (shoppingCart.length >= 0) {
          document.querySelector("#message").style = "display:none";
        }

        console.log(shoppingCart);
      }

      const cartElement = document.querySelector("tbody");
      function deleteItem(e) {
        if (!e.target.classList.contains("remove")) {
          return;
        }

        const button = e.target;
        button.closest("tr").remove();
      }
      cartElement.addEventListener("click", deleteItem);
    </script>
  </body>
</html>
